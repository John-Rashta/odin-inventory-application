<!-- views/updateUser.ejs -->
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/create.css">
  </head>
<body>
  <div class="pageContainer">
    <%- include('./partials/navbar') %>
    <main>
      <%- include("partials/errors.ejs") %>
      <form action=<%= `/items/update/${item.id}` %> method="POST">
        <div class="inputDiv">
          <label for="">
            Name:
            <input class="nameInput" type="text" name="item_name" value="<%= item.item_name %>" required>
          </label>
          <label for="">
            Price:
            <input type="text" name="price" value="<%= item.price %>" required>
          </label>
          <label for="">
            Measure:
            <input type="text" name="measure" value="<%= item.measure %>" required>
          </label>
        </div>
        <fieldset>
            <legend>Choose the Categories:</legend>
            <% if (categories) { %>
              <% categories.map((category) => { %>
                  <% if (item.categories_array.includes(category.category_name)) { %>
                      <div>
                          <input type="checkbox" id="<%= category.id %>" name="categories" value="<%= category.id %>" checked />
                          <label for="<%= category.id %>"><%= category.category_name %></label>
                      </div>
                  <% } else { %>
                      <div>
                          <input type="checkbox" id="<%= category.id %>" name="categories" value="<%= category.id %>"/>
                          <label for="<%= category.id %>"><%= category.category_name %></label>
                      </div>
                  <% } %>
              <% }) %>
            <% } %>
          </fieldset>
        <button type="submit">Update Item</button>
      </form>
    </main>
    <%- include('./partials/footer')%>
  </div>
</body>
</html>